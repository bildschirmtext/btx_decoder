os: osx
language: objective-c

matrix:
  include:
    - osx_image: xcode10.1
      env: 
        - SDK_VERSION=10.9

script:
  - set -o pipefail
  - xcodebuild -project ./macOS/btx_decoder.xcodeproj -sdk macosx -arch x86_64
  - hdiutil create dist/btx_decoder.dmg -srcfolder macOS/build/Release/ -ov

after_success:
  - wget -c https://github.com/probonopd/uploadtool/raw/master/upload.sh
  - bash upload.sh dist/*
  
branches:
  except:
    - # Do not build tags that we create when we upload to GitHub Releases
    - /^(?i:continuous)/
